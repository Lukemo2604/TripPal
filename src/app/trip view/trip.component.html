<div class="trip-container" *ngIf="editTrip">
    <!-- Sidebar -->
    <div class="sidebar">
      <h2>Trip: {{ editTrip.location }}</h2>
  
      <!-- Location with Places Autocomplete + ngModel -->
      <label>Location:
        <!-- 
          We reference #locInput for autocomplete,
          but also do [(ngModel)]="editTrip.location" so it displays the existing doc field
        -->
        <input
          #locInput
          [(ngModel)]="editTrip.location"
          name="location"
          placeholder="Where to?"
        />
      </label>
  
      <label>Start Date:
        <input [(ngModel)]="editTrip.startDate" type="date" name="startDate" />
      </label>
  
      <label>End Date:
        <input [(ngModel)]="editTrip.endDate" type="date" name="endDate" />
      </label>
  
      <label>Flights:
        <input [(ngModel)]="editTrip.flights" name="flights" />
      </label>
  
      <!-- Accommodation with Places Autocomplete + ngModel -->
      <label>Accommodation:
        <!-- 
          #accomInput for lodging autocomplete
          Also bind with [(ngModel)] to show the doc's existing value 
        -->
        <input
          #accomInput
          [(ngModel)]="editTrip.accommodation"
          name="accommodation"
          placeholder="Hotel name?"
        />
      </label>
  
      <label>Budget:
        <input [(ngModel)]="editTrip.budget" type="number" name="budget" />
      </label>
  
      <label>Notes:
        <textarea [(ngModel)]="editTrip.notes" name="notes"></textarea>
      </label>
  
      <!-- FamilyAttending array -->
      <h4>Family Attending</h4>
      <div *ngIf="editTrip.familyAttending?.length; else noFam">
        <div *ngFor="let fam of editTrip.familyAttending">
          <input type="checkbox" [(ngModel)]="fam.attending" /> {{ fam.name }}
        </div>
      </div>
      <ng-template #noFam>
        <p>No family members listed.</p>
      </ng-template>
  
      <button class="primary-btn" (click)="saveTrip()">Save</button>
    </div>
  
    <!-- Map + itinerary area -->
    <div class="map-area">
      <google-map
        [center]="mapCenter"
        [zoom]="14"
        (mapClick)="onMapClicked($event)"
        height="400px"
        width="400px"
      >
      </google-map>
  
      <!-- Itinerary list -->
      <div class="itinerary">
        <h4>Itinerary</h4>
        <ul>
          <li *ngFor="let item of editTrip.itinerary; let i = index">
            {{ item.placeName }} ({{ item.lat }}, {{ item.lng }})
            <button class="danger-btn" (click)="removeItineraryItem(i)">Remove</button>
          </li>
        </ul>
      </div>
    </div>
  </div>
  
  <support></support>
  